#!/bin/bash

# Script to fetch data for multiple Pokémon and save to separate files.
# List of Pokémon to retrieve data for.
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Base URL for the Pokémon API.
API_URL="https://pokeapi.co/api/v2/pokemon"

# Directory to store the JSON files.
DATA_DIR="pokemon_data"

# Create the directory if it doesn't exist.
mkdir -p "$DATA_DIR"

# Loop through each Pokémon in the list.
for pokemon in "${POKEMON_LIST[@]}"; do
    echo "Fetching data for $pokemon..."

    # Define the full URL for the current Pokémon.
    URL="$API_URL/$pokemon"

    # Define the output file path.
    OUTPUT_FILE="$DATA_DIR/$pokemon.json"

    # Make the API request and save the output to the file.
    # The -s flag makes the curl command silent.
    curl -s -o "$OUTPUT_FILE" "$URL"

    # Check the exit status of the curl command.
    if [ $? -eq 0 ]; then
        echo "Saved data to $OUTPUT_FILE ✅"
    else
        echo "Failed to fetch data for $pokemon. Please check the API URL and your internet connection."
    fi

    # Add a delay to prevent hitting the API's rate limit.
    sleep 1
done

echo "Batch processing complete."
